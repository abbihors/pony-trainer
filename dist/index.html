<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Pony Trainer</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class='wrapper'>
        <div class='readme'>
            <h1>Pony Trainer</h1>
            <div class='subtitle'>
                <p>A kinky ponyplay app by <a href='https://twitter.com/abbihors'>@abbihors</a>. Like what you see? Consider buying this pony a <a href='https://ko-fi.com/abbihors'>Ko-fi</a> :2c</p>
            </div>

            <h2>What is this?</h2>
            <p>This is a webapp that buzzes your wireless buttplug when you make horse-like sounds, the goal being to train you into a good pony using classical conditioning by rewarding you for making the correct sounds. The app works by using machine learning to tell if the sound you made was more horse-like or more human-like.</p>

            <p>When you are ready, use the buttons on the right to start listening to your microphone and connect your vibrator. If you're unsure of what kind of sounds you should be making, listen to the two samples below:</p>

            <div class='samples'>
                <div class='sample'>
                    <p>Neigh sample</p>
                    <audio controls src='assets/neigh_sample.wav'></audio>
                </div>

                <div class='sample'>
                    <p>Snort sample</p>
                    <audio controls src='assets/snort_sample.wav'></audio>
                </div>
            </div>
            
            <h3>Denial system</h3>
            <p>Pony Trainer features a denial system. With this system, your vibrator may become randomly disabled at any point while in use, indicated by a padlock (<img class='inline-lock' src='assets/lock.svg'>) on the main progress bar. When this happens, you will have to prove that you deserve to have it turned back on by making a few horse-like noises. While this might sound frustrating, I have found that the combination of expected pleasure and unpredictability cause a strange yet highly pleasurable sensation.</p>

            <h2>Will this app record me?</h2>
            <p>No. The app only keeps the last second of audio at any given time, and it is never uploaded anywhere. If you'd like, you could can open this page in private mode and turn off your internet after loading this page, and the app will continue to work.</p>

            <h2>Toy compatibility</h2>
            <p>This app will work with any of the (roughly) 150 toys that are supported by the <a href='https://buttplug.io/'>Buttplug</a> library. If you'd like to see if your app is supported, you can check <a href='https://iostindex.com/?filtersChanged=1&filter0ButtplugSupport=4'>here</a>.</p>

            <h2>Browser compatibility</h2>
            <p>Pony Trainer works in any modern browser (Chrome, Firefox, Safari, Edge, etc.). If you are using Firefox or Safari, you will have to install and run <a href='https://intiface.com/desktop/'>Intiface Desktop</a> on your computer, as neither of these browsers can interact with Bluetooth devices directly. This is also the case if you are using the Lovense USB dongle to connect to your toy.</p>
        </div>

        <div class='app'>
            <div class='wrapper-button'>
                <button id='btn-listen'>Start listening</button>
            </div>

            <div id='err-listen' class='error'>Error: Couldn't open microphone. You need to allow Pony Trainer to use your microphone to use this app.</div>

            <div class='wrapper-listen'>
                <h3>Start listening</h3>
                <p>Speak into your microphone and use the slider to adjust the voice activation threshold. Try to get it so that it only glows green when you speak.</p>

                <input type='range' id='threshold' min='0' max='1' step='0.005'>

                <div class='voicemeter-wrapper'>
                    <div class='voicemeter-recordvol'></div>
                    <div class='voicemeter'></div>
                </div>
            </div>

            <div class='wrapper-button'>
                <button id='btn-connect'>Connect a vibrator</button>
            </div>

            <div id='err-connect' class='error'>Error: Couldn't connect. Make sure this page has permission to use Bluetooth.</div>
            
            <div class='wrapper-reconnect'>
                <div class='error'>Device disconnected</div>
                <button id='btn-reconnect'>Reconnect</button>
            </div>
            
            <div class='wrapper-intiface'>
                <div class='info'>Bluetooth is unsupported by your browser. You can still use the app, but you'll have to install and run the <a href='https://intiface.com/desktop/'>Intiface Desktop server</a> to use it. Once it's running, enter the server address below and connect.</div>
                <input id='intiface-addr' value='127.0.0.1:12345'>
                <button id='btn-intiface-connect'>Connect</button>
                <div id='intiface-scanning-info' class='info'>Scanning...</div>
                <div id='intiface-connect-err' class='error'>Error: Couldn't connect to Intiface Desktop server. Make sure that the server has been started and that the address is correct.</div>
            </div>

            <div class='wrapper-device-list'></div>
            
            <div class='bars'>
                <div class='progressbar-wrapper'>
                    <div class='progressbar-icon'>
                        <img src='assets/lock.svg'>
                    </div>
                    <div class='progressbar-outline'></div>
                    <div class='progressbar'></div>
                </div>
            </div>

            <div class='wrapper-button'>
                <button id='btn-play-pause'>Pause</button>
            </div>
        </div>

        <div class='footer'>
            <p>Copyright © 2021 — Source code available on <a>GitHub</a></p>
        </div>
    </div>

    <script lang="javascript" src="https://cdn.jsdelivr.net/npm/buttplug@1.0.14/dist/web/buttplug.min.js"></script>
    <script src='main.js'></script>
</body>

</html>